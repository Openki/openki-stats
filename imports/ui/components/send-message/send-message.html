<template name="sendMessage">
	<form class="js-send-message">
		<div class="mb-3">
			<textarea class="form-control send-message-textarea js-email-message"
					  placeholder="{{mf 'profile.mail.placeholder' 'Hi {USER}! I wanted to tell you...' USER=(username recipientId)}}"></textarea>
		</div>
		{{#if hasEmail}}
			{{#if hasVerifiedEmail}}
				<div class="form-check">
					<input class="form-check-input" checked="{{state 'sendCopy'}}" name="sendCopy"
						   type="checkbox" value="" id="sendMessageSendCopyCheck">
					<label class="form-check-label"
						   for="sendMessageSendCopyCheck">{{mf 'profile.mail.copy' 'Send me a copy of this message'}}</label>
				</div>
				<div class="form-check">
					<input class="form-check-input" checked="{{state 'revealAddress'}}"
						   name="revealAddress" type="checkbox" value=""
						   id="sendMessageRevealAddressCheck">
					<label class="form-check-label"
						   for="sendMessageRevealAddressCheck">{{mf 'profile.mail.attachmail' 'Attach my e-mail address'}}</label>
				</div>
			{{else}}
				<div class="panel panel-warning">
					<div class="panel-heading">
						<i class="fa fa-check-circle-o" aria-hidden="true"></i>
						{{mf 'sendMessage.plsVerifyEmail' 'Please verify your E-Mail'}}
					</div>
					<div class="panel-body send-message-alert-body">
						<p>
							{{#mf KEY='userprofile.infoForUnverifiedMail'}}
								In order to receive a copy to your E-Mail address or attach it to the message, you need to verify your address.
							{{/mf}}
						</p>
						{{> verifyEmail}}
					</div>
				</div>
			{{/if}}
		{{/if}}
		<div class="form-actions">
			<button type="submit" class="btn btn-save" {{disabledIfBusy}}>
				{{#if busy 'sending'}}
					<i class="fa fa-circle-o-notch fa-spin fa-fw" aria-hidden="true"></i>
					{{mf 'userprofile.sendmail-btn.busy' 'Sending E-Mail...'}}
				{{else}}
					<i class="fa fa-send fa-fw" aria-hidden="true"></i>
					{{mf 'userprofile.sendmail-btn' 'Send E-Mail'}}
				{{/if}}
			</button>
		</div>
	</form>
</template>
